(function(a){a.fn.stickyscroll=function(b){if(!this.length){return this}b=a.extend({fixedTop:0,fixedBottom:0,useFixedPositioning:true},b||{});this.each(function(){var g=this,j=false,f=b.fixedTop||0,h=b.fixedBottom||0,i=0;if(!a.isNumeric(b.fixedTop)){f=0;a(b.fixedTop).each(function(){f+=a(this).outerHeight()})}if(!a.isNumeric(b.fixedBottom)){h=0;a(b.fixedBottom).each(function(){h+=a(this).outerHeight()})}var k=a(this).css({width:a(this).width(),height:a(this).height()}),e={top:k.offset().top,width:k.width()},c=k.wrapInner('<div class="floater"></div>').find("> .floater"),d=function(){j=c.outerHeight()>a(window).height()-f-h};c.css({position:"fixed",inset:"visible",left:e.left,top:e.top,width:e.width});a(window).on("scroll.stickyscroll touchmove.stickyscroll",function(){if(j){e.height=c.outerHeight();var p=c.offset().top,o=a(this).scrollTop()+f,l=a(this).height(),n={top:p-o,bottom:l-(p-o+e.height)-f-h};if(o>i){var m=k.outerHeight();if(o>e.top+m-l+f+h){c.css({position:"absolute",top:e.top+m-e.height})}else{if(n.bottom<0){c.css({position:"absolute",top:p})}else{c.css({position:b.useFixedPositioning?"fixed":"absolute",top:Math.max(n.top,l-e.height)-h+(b.useFixedPositioning?0:o)})}}}else{if(o<i){if(o<e.top){c.css({position:"absolute",top:e.top})}else{if(n.top<0){c.css({position:"absolute",top:p})}else{c.css({position:b.useFixedPositioning?"fixed":"absolute",top:Math.min(0,n.top)+f+(b.useFixedPositioning?0:o)})}}}}}else{c.css({position:"fixed",top:e.top})}i=o});a(window).on("resize.stickyscroll",function(){d()});d()})}})(jQuery);