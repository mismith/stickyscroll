(function(e){e.fn.stickyscroll=function(t){if(!this.length)return this;t=e.extend({fixedTop:0,fixedBottom:0,useFixedPositioning:true},t||{});this.each(function(){var n=this,r=false,i=t.fixedTop||0,s=t.fixedBottom||0,o=0;if(!e.isNumeric(t.fixedTop)){i=0;e(t.fixedTop).each(function(){i+=e(this).outerHeight()})}if(!e.isNumeric(t.fixedBottom)){s=0;e(t.fixedBottom).each(function(){s+=e(this).outerHeight()})}var u=e(this).css({width:e(this).width(),height:e(this).height()}),a={top:u.offset().top,width:u.width()},f=u.wrapInner('<div class="floater"></div>').find("> .floater"),l=function(){r=f.outerHeight()>e(window).height()-i-s};f.css({position:"fixed",inset:"visible",left:a.left,top:a.top,width:a.width});e(window).on("scroll.stickyscroll touchmove.stickyscroll",function(){if(r){a.height=f.outerHeight();var n=f.offset().top,l=e(this).scrollTop()+i,c=e(this).height(),h={top:n-l,bottom:c-(n-l+a.height)-i-s};if(l>o){var p=u.outerHeight();if(l>a.top+p-c+i+s){f.css({position:"absolute",top:a.top+p-a.height});console.log("ab spill")}else if(h.bottom<0){f.css({position:"absolute",top:n})}else{f.css({position:t.useFixedPositioning?"fixed":"absolute",top:Math.max(h.top,c-a.height)-s+(t.useFixedPositioning?0:l)})}}else if(l<o){if(l<a.top){f.css({position:"absolute",top:a.top})}else if(h.top<0){f.css({position:"absolute",top:n})}else{f.css({position:t.useFixedPositioning?"fixed":"absolute",top:Math.min(0,h.top)+i+(t.useFixedPositioning?0:l)})}}}else{f.css({position:"fixed",top:a.top})}o=l});e(window).on("resize.stickyscroll",function(){l()});l()})}})(jQuery)